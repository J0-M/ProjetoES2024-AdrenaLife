{% extends 'base.html' %}

{% block conteudo %}
<div class="container mt-5">
    <div class="card mx-auto" style="max-width: 500px;">
        <div class="card-body text-center">
            <!-- Ícone de usuário -->
            <div class="mb-4">
                <i class="bi bi-person-circle" style="font-size: 4rem; color: #6af06a;"></i>
            </div>

            <!-- Informações do usuário -->
            <h5 class="card-title">{{ usuario.nome }}</h5>
            <p class="card-text">
                <strong>CPF:</strong> {{ usuario.cpf }}<br>
                <strong>Email:</strong> {{ usuario.email }}<br>
                <strong>Telefone:</strong> {{ usuario.telefone }}<br>
                <strong>Cidade:</strong> {{ usuario.cidade }}<br>
                <strong>Tipo de Usuário:</strong> {{ usuario.get_tipo_usuario_display }}<br>
            </p>

            <!-- Eventos Inscritos -->
            <h5 class="mt-4">Eventos Inscritos</h5>
            <ul class="list-group">
                {% for evento in eventos_inscritos %}
                    <li class="list-group-item">
                        {{ evento.nome }} ({{ evento.data }})<br>
                        <small>Vagas disponíveis: {{ evento.vagas_disponiveis }}</small>
                        
                        <!-- Formulário para Cancelar Inscrição -->
                        <form action="{% url 'inscricao' %}" method="POST" style="display: inline-block;">
                            {% csrf_token %}
                            <input type="hidden" name="_method" value="DELETE">
                            <input type="hidden" name="evento_id" value="{{ evento.id }}">
                            <input type="hidden" name="usuario_id" value="{{ usuario.id_usuario }}">
                            <button type="submit" class="btn btn-danger btn-sm">Cancelar Inscrição</button>
                        </form>
                    </li>
                {% empty %}
                    <li class="list-group-item">Você não está inscrito em nenhum evento.</li>
                {% endfor %}
            </ul>

            <!-- Botões -->
            <div class="d-grid gap-2 mt-4">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editarPerfilModal">
                    Editar Perfil
                </button>
                <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#alterarSenhaModal">
                    Alterar Senha
                </button>
                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#excluirContaModal">
                    Excluir Conta
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}
